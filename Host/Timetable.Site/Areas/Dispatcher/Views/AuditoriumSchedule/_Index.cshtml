@using Timetable.Site.Infrastructure
<nav class="navbar navbar-default navbar-fixed-top navbar-child" role="navigation" style="top:51px;">
    <div class="navbar-inner">
        <div class="container">
            <form class="navbar-form navbar-left">
                <div class="form-group col-sm-4">
                    <select class="form-control" required="required" ng-change="loadAuditoriums(building)" ng-model="building" ng-options="building.id as building.name for building in pageModel.buildings" ></select>
                </div>
                <div class="form-group col-sm-3">
                    <select class="form-control" required="required" ng-change="loadAuditoriumSchedule()" ng-model="auditorium" ng-options="building.id as building.name for building in auditoriums"></select>
                </div>
                <div class="form-group col-sm-2">
                    <select class="form-control" required="required" ng-change="loadAuditoriumSchedule()" ng-model="studyYear" ng-options="studyYear.id as studyYear.name for studyYear in pageModel.studyYears"></select>
                </div>
                <div class="form-group col-sm-2">
                    <select class="form-control" required="required" ng-change="loadAuditoriumSchedule()" ng-model="semester" ng-options="semester.id as semester.name for semester in pageModel.semesters"></select>
                </div>
                <div class="form-group col-sm-1">
                    <button class="btn btn-default" data-original-title ng-click="getReportForAuditorium()"><i class="glyphicon glyphicon-download-alt"></i></button>
                </div>
            </form>
        </div>
    </div>
</nav>
<div class="container-fluid">
    <div class="row-fluid" style="position: absolute; left: 0px; width: 100%; top: 100px; bottom:0; overflow-y: scroll;">
        <table class="table table-bordered table-striped" style="margin-bottom: 0">
            <thead>
                <tr class="info">
                    <th style="min-width: 60px; width: 60px">Время</th>
                    <th>Пн</th>
                    <th>Вт</th>
                    <th>Ср</th>
                    <th>Чт</th>
                    <th>Пт</th>
                    <th>Сб</th>
                    <th>Вс</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="time in times">
                    <td style="min-width: 60px; width:60px;">{{moment(time.start, 'HH:mm:ss').format('HH:mm')}}<br />{{moment(time.end, 'HH:mm:ss').format('HH:mm')}}</td>
                    <td ng-repeat="day in days" class="day-content" ng-class="{full: hasFullScheduleTicket(time, day), even: hasEvenScheduleTicket(time, day), odd: hasOddScheduleTicket(time, day)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, day)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.tutorialName}}, {{schedule.tutorialTypeName}}., {{schedule.buildingName}}. {{schedule.auditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.lecturerName}}
                            </p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
@{ var model = new JsonNetResult(Model); }
<script>
    window.pageModel = JSON.parse('@Html.Raw(model.JsonText)');
</script>
