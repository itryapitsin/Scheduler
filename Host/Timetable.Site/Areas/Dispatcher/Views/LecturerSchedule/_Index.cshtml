@using Newtonsoft.Json
<div class="navbar navbar-fixed-top" style="top:41px;">
    <div class="navbar-inner">
        <div class="container">
            <form class="navbar-search pull-left inline" style="width:100%;">
                <strong>ФИО преподавателя</strong>
                <input type="text" required="required" ng-init="loadLecturerSchedule()" ng-model="lecturer" class="span5" data-min-length="3" placeholder="Поиск: Введите ФИО..." style="height: 20px; margin-bottom: 0px;" bs-typeahead="searchLecturer">
                <select class="span2" required="required" ng-model="studyYear" ng-change="loadLecturerSchedule()" ng-options="studyYear.Id as studyYear.Name for studyYear in pageModel.StudyYears" style="height: 30px;margin-bottom: 0px;"></select>
                <select class="span2" required="required" ng-model="semester" ng-change="loadLecturerSchedule()" ng-options="semester.Id as semester.Name for semester in pageModel.Semesters" style="height: 30px;margin-bottom: 0px;"></select>
                <!-- <button class="btn" style="margin-top: 0" ng-init="searchTitle='Найти занятия'" data-placement="right" bs-tooltip="searchTitle" data-original-title ng-click="loadLecturerSchedule()"><i class="icon icon-search"></i></button> -->
                <button class="btn" ng-disabled="!canCreateReport()" style="margin-top: 0" ng-init="excelTitle='Скачать в Excel'" data-placement="right" bs-tooltip="excelTitle" data-original-title ng-click="getReportForLecturer()"><i class="icon icon-list"></i></button>
                <span class="badge badge-important" ng-init="hoursePerWeekTitle='Всего совпадений'" data-placement="right" bs-tooltip="hoursePerWeekTitle" data-original-title title>{{foundLecturersCount}}</span>
            </form>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row-fluid" style="position: absolute; left: 0px; top: 90px; bottom:0; overflow-y: scroll;">
        <table class="table table-bordered table-striped" style="margin-bottom: 0">
            <thead>
                <tr class="info">
                    <th style="min-width: 60px; width: 60px">Время</th>
                    <th>Пн</th>
                    <th>Вт</th>
                    <th>Ср</th>
                    <th>Чт</th>
                    <th>Пт</th>
                    <th>Сб</th>
                    <th>Вс</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="time in times">
                    <td style="min-width: 60px; width:60px;">{{moment(time.Start, 'HH:mm:ss').format('HH:mm')}}<br />{{moment(time.End, 'HH:mm:ss').format('HH:mm')}}</td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 1), even: hasEvenScheduleTicket(time, 1), odd: hasOddScheduleTicket(time, 1)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 1)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 2), even: hasEvenScheduleTicket(time, 2), odd: hasOddScheduleTicket(time, 2)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 2)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 3), even: hasEvenScheduleTicket(time, 3), odd: hasOddScheduleTicket(time, 3)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 3)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 4), even: hasEvenScheduleTicket(time, 4), odd: hasOddScheduleTicket(time, 4)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 4)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 5), even: hasEvenScheduleTicket(time, 5), odd: hasOddScheduleTicket(time, 5)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 5)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 6), even: hasEvenScheduleTicket(time, 6), odd: hasOddScheduleTicket(time, 6)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 6)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                    <td class="day-content" ng-class="{full: hasFullScheduleTicket(time, 7), even: hasEvenScheduleTicket(time, 7), odd: hasOddScheduleTicket(time, 7)}">
                        <div class="schedule-card alert alert-success"
                             ng-repeat="schedule in findScheduleTickets(time, 7)"
                             ng-class="{even: isEvenScheduleTicket(schedule), odd: isOddScheduleTicket(schedule)}">
                            <p style="margin: 0">
                                {{schedule.TutorialName}}, {{schedule.TutorialTypeName}}., {{schedule.BuildingName}}. {{schedule.AuditoriumNumber}}
                            </p>
                            <p style="margin: 0">
                                {{schedule.LecturerName}}
                            </p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    window.pageModel = JSON.parse('@Html.Raw(JsonConvert.SerializeObject(Model))');
</script>